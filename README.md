# ğŸ“± ì˜¤í”ˆí‹°ì½˜

| í•­ëª©          | ë‚´ìš© |
|--------------|------|
| ğŸ•’ ê¸°ê°„      | 2024-10 ~ 2024-11 |
| ğŸ‘¥ ì¸ì›      | 6ëª… |
| ğŸ›  ì‚¬ìš© ê¸°ìˆ  | <img src="https://img.shields.io/badge/kotlin-%237F52FF.svg?style=for-the-badge&logo=kotlin&logoColor=white" alt="Kotlin"/> <img src="https://img.shields.io/badge/Android-3DDC84?style=for-the-badge&logo=android&logoColor=white" alt="Android"/> <img src="https://img.shields.io/badge/java-%23ED8B00.svg?style=for-the-badge&logo=openjdk&logoColor=white" alt="Java"/> <img src="https://img.shields.io/badge/spring-%236DB33F.svg?style=for-the-badge&logo=spring&logoColor=white" alt="Spring"/> <img src="https://img.shields.io/badge/express.js-%23404d59.svg?style=for-the-badge&logo=express&logoColor=%2361DAFB" alt="Express.js"/> <img src="https://img.shields.io/badge/postgres-%23316192.svg?style=for-the-badge&logo=postgresql&logoColor=white" alt="Postgres"/> |
| ğŸ¯ ë‹´ë‹¹ ì—­í•  | 1) ì´ëª¨í‹°ì½˜ ê²€ìƒ‰ ê¸°ëŠ¥ ê°œë°œ (ì•ˆë“œë¡œì´ë“œ)<br/>2) ì´ëª¨í‹°ì½˜ íŒ© ìƒì„¸ í™”ë©´ ê°œë°œ (ì•ˆë“œë¡œì´ë“œ)<br/>3) ì´ëª¨í‹°ì½˜ êµ¬ë§¤ ë° ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ ê°œë°œ (ì•ˆë“œë¡œì´ë“œ) |
| ğŸ“– ê°œìš”      | ììœ ë¡œìš´ ì´ëª¨í‹°ì½˜ ê³µìœ  ë° ì‚¬ìš© í”Œë«í¼ (ì•ˆë“œë¡œì´ë“œ ëª¨ë°”ì¼ ì•±, ì›¹) |

# ğŸ’¡ í”„ë¡œì íŠ¸ ê°œìš”
## ë°°ê²½ ë° ëª©í‘œ
- ì˜¤í”ˆí‹°ì½˜ì€ ì‚¬ìš©ìê°€ ì§ì ‘ ì œì‘í•œ ì´ëª¨í‹°ì½˜ì„ ììœ ë¡­ê²Œ ë“±ë¡í•˜ê³ , ë‹¤ì–‘í•œ í”Œë«í¼ì—ì„œ ì†ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.
- ì´ëª¨í‹°ì½˜ ì‹œì¥ì˜ ë¹ ë¥¸ ì„±ì¥ê³¼ ì‚¬ìš©ìë“¤ì˜ ë‹¤ì–‘í•œ ë‹ˆì¦ˆë¥¼ ë°˜ì˜í•˜ì—¬, ëˆ„êµ¬ë‚˜ ì‰½ê²Œ ì´ëª¨í‹°ì½˜ ì‘ê°€ë¡œ ë°ë·”í•˜ê³ , ì´ëª¨í‹°ì½˜ì„ ë‹¤ì–‘í•œ ìš©ë„ë¡œ í™œìš©í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ì œê³µí•˜ëŠ”ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

## ì£¼ìš” ê¸°ëŠ¥
### âœ… ì´ëª¨í‹°ì½˜ ìŠ¤í† ì–´ (ëª¨ë°”ì¼)
| ì´ëª¨í‹°ì½˜ ìŠ¤í† ì–´ ë©”ì¸ | ì´ëª¨í‹°ì½˜ íŒ© ìƒì„¸ í™”ë©´ | ì´ëª¨í‹°ì½˜ ê²€ìƒ‰ |
| --- | --- | --- |
| ![image](https://github.com/user-attachments/assets/f4b4d318-162a-4504-b086-3219fc69c612) | ![image](https://github.com/user-attachments/assets/8e9efa4d-30cd-429c-8750-095ddb9a4732) | ![image](https://github.com/user-attachments/assets/4786fde2-9289-4f09-9c32-9e80baf0715b) |

- ì´ëª¨í‹°ì½˜ ìŠ¤í† ì–´ì—ì„œ ì‹ ê·œ, ì¸ê¸°, íƒœê·¸ë³„ ì´ëª¨í‹°ì½˜ì„ íƒìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì´ëª¨í‹°ì½˜ íŒ© ìƒì„¸ í™”ë©´ì—ì„œëŠ” ì´ëª¨í‹°ì½˜ ë¯¸ë¦¬ë³´ê¸°ë¥¼ ì œê³µí•˜ë©° êµ¬ë§¤ ë° ë‹¤ìš´ë¡œë“œë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì´ëª¨í‹°ì½˜ ê²€ìƒ‰ í™”ë©´ì—ì„œ í…ìŠ¤íŠ¸ë¡œ ì´ëª¨í‹°ì½˜ì„ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| í”Œë¡œíŒ… ì•„ì´ì½˜ í´ë¦­ì‹œ | ì´ëª¨í‹°ì½˜ í´ë¦­ì‹œ | ë¶™ì—¬ë„£ê¸°ë¡œ ì „ì†¡ |
| --- | --- | --- |
| ![image](https://github.com/user-attachments/assets/d39fcdfa-b2bc-46fe-9bbc-baf43611ceb0) | ![image](https://github.com/user-attachments/assets/6f599732-b800-4503-9f53-659c4a144042) | ![image](https://github.com/user-attachments/assets/c4a0ce86-b7c9-4ec1-8523-d9260bd7ad62) |

- ìŠ¤í† ì–´ ì•±ì—ì„œ "ì´ëª¨í‹°ì½˜ ì„œë" ë²„íŠ¼ìœ¼ë¡œ í”Œë¡œíŒ… ì•„ì´ì½˜ì„ ì¼œê³  ëŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- í”Œë¡œíŒ… ì•„ì´ì½˜ì„ í†µí•´ ë‹¤ë¥¸ ì•± ìœ„ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- í”Œë¡œíŒ… ì•„ì´ì½˜ì„ í´ë¦­í•˜ë©´ ë‚´ê°€ ë‹¤ìš´ë¡œë“œí•œ ì´ëª¨í‹°ì½˜ë“¤ì´ í”Œë¡œíŒ… ìœˆë„ìš°ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
- ì›í•˜ëŠ” ì´ëª¨í‹°ì½˜ì„ í´ë¦­í•˜ë©´ í´ë¦½ë³´ë“œì— ì´ë¯¸ì§€ê°€ ë³µì‚¬ë©ë‹ˆë‹¤.
- ì´ë¯¸ì§€ ë¶™ì—¬ë„£ê¸°ë¥¼ ì§€ì›í•˜ëŠ” ì–´ë–¤ ê³³ì´ë“  (ì¹´ì¹´ì˜¤í†¡, ë””ìŠ¤ì½”ë“œ, Mattermost ë“±) ë¶™ì—¬ë„£ê¸°ë¡œ í¸ë¦¬í•˜ê²Œ ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| ì´ë¯¸ì§€ë¡œ ì´ëª¨í‹°ì½˜ ê²€ìƒ‰ | ì†Œì…œ ë¡œê·¸ì¸ | êµ¬ë§¤í•œ ì´ëª¨í‹°ì½˜ ê´€ë¦¬ |
| --- | --- | --- |
| ![image](https://github.com/user-attachments/assets/3886fefe-1993-4626-99a7-73ae147ee903) | ![image](https://github.com/user-attachments/assets/850ef654-0424-4ab2-92bd-7d5b7020bf5d) | ![image](https://github.com/user-attachments/assets/e717488c-14a1-406e-806b-ad7763a556dc) |

- í…ìŠ¤íŠ¸ ë¿ë§Œ ì•„ë‹ˆë¼ ì´ë¯¸ì§€ë¡œë„ ìœ ì‚¬í•œ ì´ëª¨í‹°ì½˜ì„ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì†Œì…œ ë¡œê·¸ì¸ì„ ì§€ì›í•©ë‹ˆë‹¤.
- ë‚´ ì´ëª¨í‹°ì½˜ ê´€ë¦¬ì—ì„œ ìˆœì„œ ë° í‘œì‹œ ì—¬ë¶€ë¥¼ í¸ì§‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


### âœ… ì´ëª¨í‹°ì½˜ ìŠ¤í† ì–´ (ì›¹)
- ì›¹ ì´ëª¨í‹°ì½˜ ìŠ¤í† ì–´ëŠ” ì£¼ë¡œ ì´ëª¨í‹°ì½˜ ì‘ê°€ë¥¼ ìœ„í•œ ì„œë¹„ìŠ¤ ì…ë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/bc953d63-912c-4ef0-a1b6-dd95af7789da)

- ì‘ê°€ëŠ” ìì‹ ì´ ë§Œë“  ì´ëª¨í‹°ì½˜(ì´ë¯¸ì§€)ì„ íŒ©ìœ¼ë¡œ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/00c42236-9285-49c7-a1e8-4f51b0b0c605)

- AI ê¸°ëŠ¥ì„ ì´ìš©í•´ ì´ëª¨í‹°ì½˜ì„ ì œì‘í•˜ëŠ” ì´ëª¨í‹°ì½˜ ìŠ¤íŠœë””ì˜¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/e79ed8c3-7f59-467b-8bf6-b1d116b27579)

- ì›¹ì—ì„œë„ ì´ëª¨í‹°ì½˜ì„ íƒìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/b2c15499-6037-4647-bf2b-016b018332f0)


# ğŸ”¥ ë‚˜ì˜ ê¸°ì—¬
## 1ï¸âƒ£ MVVM íŒ¨í„´ ì ìš©
ë³¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì•ˆë“œë¡œì´ë“œ ì½”ë“œ ì „ë°˜ì— MVVM íŒ¨í„´ì„ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

- MVVM íŒ¨í„´ì€ ë‹¤ìŒ ì„¸ ê°€ì§€ ì£¼ìš” ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤.
  - Model (ëª¨ë¸): ë°ì´í„° ë° ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” ê³„ì¸µ
  - View (ë·°): UIë¥¼ ë‹´ë‹¹í•˜ë©° ì‚¬ìš©ìì˜ ì…ë ¥ì„ ì²˜ë¦¬í•˜ëŠ” ê³„ì¸µ
  - ViewModel (ë·°ëª¨ë¸): Modelê³¼ View ì‚¬ì´ì—ì„œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ê³  UI ë¡œì§ì„ ì²˜ë¦¬í•˜ëŠ” ê³„ì¸µ
- MVVM íŒ¨í„´ì˜ ì¥ì ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
  - **UIì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë¶„ë¦¬** â†’ ViewModelì´ UI ë¡œì§ì„ ë‹´ë‹¹í•˜ë¯€ë¡œ UI ì½”ë“œê°€ ê¹”ë”í•´ì§
  - **ìƒëª… ì£¼ê¸° ê´€ë¦¬** â†’ ViewModelì€ Activity/Fragmentì˜ ìƒëª… ì£¼ê¸°ì™€ ë¬´ê´€í•˜ê²Œ ë°ì´í„°ë¥¼ ìœ ì§€
  - **ë¹„ë™ê¸° ì²˜ë¦¬ ìµœì í™”** â†’ Coroutineì„ í™œìš©í•˜ì—¬ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë°ì´í„° ë¡œë”© ê°€ëŠ¥

ì´ëª¨í‹°ì½˜ ê²€ìƒ‰ í™”ë©´ì˜ ì˜ˆë¥¼ í†µí•´ í”„ë¡œì íŠ¸ì—ì„œ MVVM íŒ¨í„´ì„ ì ìš© ë°©ì‹ì„ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.

### 1. ViewModelì„ ì´ìš©í•œ UI ìƒíƒœ ê´€ë¦¬

`SearchScreenViewModel`ì€ ê²€ìƒ‰ í™”ë©´ì—ì„œ UI ìƒíƒœë¥¼ ê´€ë¦¬í•˜ë©°, `StateFlow`ë¥¼ ì´ìš©í•´ Compose UIì™€ ë°ì´í„° ë°”ì¸ë”©ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

#### ViewModel ì½”ë“œ:
```kotlin
@HiltViewModel
class SearchScreenViewModel @Inject constructor(
    private val searchEmoticonPacksUseCase: SearchEmoticonPacksUseCase,
    private val searchEmoticonPacksByImageUseCase: SearchEmoticonPacksByImageUseCase
) : ViewModel() {
    private val _searchText = MutableStateFlow("")
    private val _searchResult = MutableStateFlow(emptyList<SearchEmoticonPacksListItem>())
    private val _isLoading = MutableStateFlow(false)
    private val _selectedImageUri = MutableStateFlow<Uri?>(null)

    val searchText: StateFlow<String> = _searchText
    val searchResult: StateFlow<List<SearchEmoticonPacksListItem>> = _searchResult
    val isLoading: StateFlow<Boolean> = _isLoading
    val selectedImageUri: StateFlow<Uri?> = _selectedImageUri

    fun onSearchTextChange(value: String) {
        _searchText.value = value
    }

    fun search() {
        viewModelScope.launch {
            _isLoading.value = true
            val result = searchEmoticonPacksUseCase(_searchText.value)
            _searchResult.value = result
            _isLoading.value = false
        }
    }
}
```

#### ì£¼ìš” êµ¬í˜„:
- `MutableStateFlow`ë¥¼ ì‚¬ìš©í•˜ì—¬ UI ìƒíƒœë¥¼ ê´€ë¦¬í•¨
- `onSearchTextChange()`ë¥¼ í†µí•´ ì‚¬ìš©ìì˜ ì…ë ¥ì„ ë°˜ì˜
- `search()` ë©”ì„œë“œì—ì„œ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•˜ì—¬ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¤ê³  UI ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸
- `viewModelScope.launch {}` ë¸”ë¡ì„ ì‚¬ìš©í•˜ì—¬ ì½”ë£¨í‹´ ì‹¤í–‰ (ë°±ê·¸ë¼ìš´ë“œ ì‘ì—… ìˆ˜í–‰)

### 2. Compose UIì—ì„œ ViewModelê³¼ ë°ì´í„° ì—°ë™

`SearchBar` Composable í•¨ìˆ˜ì—ì„œëŠ” `ViewModel`ì„ `hiltViewModel()`ë¡œ ì£¼ì…ë°›ì•„ UIì™€ ìƒíƒœë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.

#### SearchBar ì½”ë“œ:
```kotlin
@Composable
fun SearchBar(
    viewModel: SearchScreenViewModel = hiltViewModel()
) {
    val searchText by viewModel.searchText.collectAsState()
    val context = LocalContext.current

    Row(modifier = Modifier.fillMaxWidth()) {
        BasicTextField(
            value = searchText,
            onValueChange = { viewModel.onSearchTextChange(it) },
            keyboardOptions = KeyboardOptions.Default.copy(
                imeAction = ImeAction.Search
            ),
            keyboardActions = KeyboardActions(
                onSearch = {
                    viewModel.search()
                }
            )
        )
    }
}
```

#### ì£¼ìš” êµ¬í˜„:
- `viewModel.searchText.collectAsState()`ë¥¼ ì‚¬ìš©í•˜ì—¬ UIê°€ ViewModelì˜ ìƒíƒœë¥¼ ê´€ì°°
- ì‚¬ìš©ìê°€ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ë©´ `viewModel.onSearchTextChange()`ê°€ í˜¸ì¶œë˜ì–´ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸
- `imeAction = ImeAction.Search`ë¥¼ ì„¤ì •í•˜ì—¬ ì—”í„° í‚¤ ì…ë ¥ ì‹œ `viewModel.search()`ê°€ í˜¸ì¶œë˜ë„ë¡ êµ¬ì„±

### 3. ë¹„ë™ê¸° ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì²˜ë¦¬

ViewModel ë‚´ë¶€ì—ì„œ `suspend fun`ì„ ì‚¬ìš©í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ëŠ” UI ìŠ¤ë ˆë“œë¥¼ ì°¨ë‹¨í•˜ì§€ ì•Šê³  ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

#### ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì½”ë“œ:
```kotlin
suspend fun loadMoreSearchResult() {
    if (_isLoading.value) return
    _isLoading.value = true

    val (newItems, isLast) = searchEmoticonPacksUseCase(
        searchKey = _searchKey.value.key,
        searchText = _searchText.value,
        page = page,
        size = pageSize,
        sort = _searchSort.value.key
    )
    _searchResult.value += newItems
    lastPageReached = isLast
    page++
    _isLoading.value = false
}
```

#### ì£¼ìš” í¬ì¸íŠ¸:
- `suspend` í•¨ìˆ˜ë¡œ ì‘ì„±í•˜ì—¬ **ë¹„ë™ê¸° ì‹¤í–‰ì„ ìµœì í™”**
- `_isLoading` ìƒíƒœë¥¼ ì‚¬ìš©í•˜ì—¬ ì¤‘ë³µ ìš”ì²­ì„ ë°©ì§€
- `searchEmoticonPacksUseCase()`ë¥¼ í˜¸ì¶œí•˜ì—¬ ê²€ìƒ‰ API ìš”ì²­ ìˆ˜í–‰ í›„ `_searchResult` ìƒíƒœ ì—…ë°ì´íŠ¸

### ê²°ë¡ 
Jetpack Compose ê¸°ë°˜ì˜ MVVM êµ¬ì¡°ë¥¼ ì ìš©í•¨ìœ¼ë¡œì¨ **ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ** ë° **ë¹„ë™ê¸° ë°ì´í„° ì²˜ë¦¬ ìµœì í™”**ë¥¼ ë‹¬ì„±í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

íŠ¹íˆ StateFlowì™€ Hiltë¥¼ í™œìš©í•´ ViewModelì„ êµ¬ì„±í•˜ì—¬ MVVM íŒ¨í„´ì„ ë”ìš± íš¨ê³¼ì ìœ¼ë¡œ ì ìš©í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.


